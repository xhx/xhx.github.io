<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>Principle of Inclusion-Exclusion (PIE) | Xiaohui Xie&#39;s Site</title>
<meta name="keywords" content="amc10, inclusion-exclusion, pie, combinatorics, mathematics">
<meta name="description" content="Principle of Inclusion-Exclusion and its applications in AMC 10">
<meta name="author" content="Xiaohui Xie">
<link rel="canonical" href="http://localhost:1313/notes/math/amc/amc10/counting-prob/principle-of-inclusion-exclusion/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.8fe10233a706bc87f2e08b3cf97b8bd4c0a80f10675a143675d59212121037c0.css" integrity="sha256-j&#43;ECM6cGvIfy4Is8&#43;XuL1MCoDxBnWhQ2ddWSEhIQN8A=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/notes/math/amc/amc10/counting-prob/principle-of-inclusion-exclusion/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"
        onload="renderMathInElement(document.body,{
          delimiters:[
            {left:'$$', right:'$$', display:true},
            {left:'$',  right:'$',  display:false},
            {left:'\\(', right:'\\)', display:false},
            {left:'\\[', right:'\\]', display:true}
          ],
          throwOnError:false
        });"></script>



</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Xiaohui Xie&#39;s Site (Alt + H)">Xiaohui Xie&#39;s Site</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://localhost:1313/">Home</a>&nbsp;»&nbsp;<a href="http://localhost:1313/notes/">Notes</a>&nbsp;»&nbsp;<a href="http://localhost:1313/notes/math/">Mathematics Notes</a>&nbsp;»&nbsp;<a href="http://localhost:1313/notes/math/amc/">AMC Problems</a>&nbsp;»&nbsp;<a href="http://localhost:1313/notes/math/amc/amc10/">AMC 10</a>&nbsp;»&nbsp;<a href="http://localhost:1313/notes/math/amc/amc10/counting-prob/">Counting &amp; Probability</a></div>
    <h1 class="post-title entry-hint-parent">
      Principle of Inclusion-Exclusion (PIE)
    </h1>
    <div class="post-description">
      Principle of Inclusion-Exclusion and its applications in AMC 10
    </div>
    <div class="post-meta"><span title='2024-01-01 00:00:00 +0000 UTC'>January 1, 2024</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;Xiaohui Xie

</div>
  </header> 
  <div class="post-content"><h1 id="principle-of-inclusion-exclusion-pie">Principle of Inclusion-Exclusion (PIE)<a hidden class="anchor" aria-hidden="true" href="#principle-of-inclusion-exclusion-pie">#</a></h1>
<p>The Principle of Inclusion-Exclusion (PIE) is a fundamental counting technique in combinatorics used to calculate the size of the union of multiple sets. It helps avoid over-counting elements that are common to multiple sets by systematically including and excluding intersections.</p>
<h3 id="principle-of-inclusion-exclusion-for-two-sets">Principle of Inclusion-Exclusion for Two Sets<a hidden class="anchor" aria-hidden="true" href="#principle-of-inclusion-exclusion-for-two-sets">#</a></h3>
<p>For two sets, $A$ and $B$:</p>
<p>$$</p>
<p>|A \cup B| = |A| + |B| - |A \cap B|
$$</p>
<p>This formula adds the sizes of both sets and then subtracts the size of their intersection, as elements in ( A \cap B ) are counted twice (once in ( |A| ) and once in ( |B| )).</p>
<h3 id="principle-of-inclusion-exclusion-for-three-sets">Principle of Inclusion-Exclusion for Three Sets<a hidden class="anchor" aria-hidden="true" href="#principle-of-inclusion-exclusion-for-three-sets">#</a></h3>
<p>For three sets ( A ), ( B ), and ( C ):</p>
<p>$$</p>
<p>|A \cup B \cup C| = |A| + |B| + |C| - |A \cap B| - |A \cap C| - |B \cap C| + |A \cap B \cap C|</p>
<p>$$</p>
<p>This expression includes the sizes of all three sets, subtracts the pairwise intersections (to correct for double counting), and then adds back the intersection of all three (as it was subtracted too many times).</p>
<h3 id="general-formula-for--n--sets">General Formula for ( n ) Sets<a hidden class="anchor" aria-hidden="true" href="#general-formula-for--n--sets">#</a></h3>
<p>For ( n ) sets ( A_1, A_2, \ldots, A_n ), the size of their union is:</p>
<p>$$</p>
<p>\left| \bigcup_{i=1}^{n} A_i \right| = \sum_{k=1}^{n} (-1)^{k+1} \sum_{1 \le i_1 &lt; i_2 &lt; \dots &lt; i_k \le n} \left| A_{i_1} \cap A_{i_2} \cap \dots \cap A_{i_k} \right|</p>
<p>$$</p>
<p>Here’s how this works:</p>
<ul>
<li>Sum up the sizes of each set.</li>
<li>Subtract the size of every pairwise intersection.</li>
<li>Add back the size of every three-set intersection.</li>
<li>Continue this pattern, alternating signs, until all possible intersections have been accounted for.</li>
</ul>
<h3 id="applications">Applications<a hidden class="anchor" aria-hidden="true" href="#applications">#</a></h3>
<p>PIE is used in various problems involving overlapping groups, such as:</p>
<ul>
<li>Counting the number of elements with at least one specific property.</li>
<li>Finding probabilities of events that may overlap.</li>
<li>Solving problems in number theory, such as counting integers with certain divisibility properties.</li>
</ul>
<p>In general, PIE ensures accurate counting by balancing inclusion and exclusion across all overlaps.</p>
<hr>
<h3 id="problem">Problem<a hidden class="anchor" aria-hidden="true" href="#problem">#</a></h3>
<p>In a class of 100 students:</p>
<ul>
<li>60 students play soccer.</li>
<li>45 students play basketball.</li>
<li>30 students play tennis.</li>
<li>20 students play both soccer and basketball.</li>
<li>15 students play both soccer and tennis.</li>
<li>10 students play both basketball and tennis.</li>
<li>5 students play all three sports.</li>
</ul>
<p>How many students play <strong>at least one</strong> of these three sports?</p>
<hr>
<h3 id="solution">Solution<a hidden class="anchor" aria-hidden="true" href="#solution">#</a></h3>
<p>To solve this, we use the Principle of Inclusion-Exclusion for three sets. Define:</p>
<ul>
<li>( S ): the set of students who play soccer, ( |S| = 60 ).</li>
<li>( B ): the set of students who play basketball, ( |B| = 45 ).</li>
<li>( T ): the set of students who play tennis, ( |T| = 30 ).</li>
<li>( |S \cap B| = 20 ): students who play both soccer and basketball.</li>
<li>( |S \cap T| = 15 ): students who play both soccer and tennis.</li>
<li>( |B \cap T| = 10 ): students who play both basketball and tennis.</li>
<li>( |S \cap B \cap T| = 5 ): students who play all three sports.</li>
</ul>
<p>We want to find ( |S \cup B \cup T| ), the number of students who play at least one sport.</p>
<p>Using the Inclusion-Exclusion formula for three sets:
[
|S \cup B \cup T| = |S| + |B| + |T| - |S \cap B| - |S \cap T| - |B \cap T| + |S \cap B \cap T|
]</p>
<p>Now, substitute the values:
[
|S \cup B \cup T| = 60 + 45 + 30 - 20 - 15 - 10 + 5
]</p>
<p>Calculate step-by-step:</p>
<ol>
<li>Sum of individual sets: ( 60 + 45 + 30 = 135 ).</li>
<li>Subtract pairwise intersections: ( 135 - 20 - 15 - 10 = 90 ).</li>
<li>Add the intersection of all three sets: ( 90 + 5 = 95 ).</li>
</ol>
<p>So, <strong>95 students</strong> play at least one of these three sports.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/amc10/">Amc10</a></li>
      <li><a href="http://localhost:1313/tags/inclusion-exclusion/">Inclusion-Exclusion</a></li>
      <li><a href="http://localhost:1313/tags/pie/">Pie</a></li>
      <li><a href="http://localhost:1313/tags/combinatorics/">Combinatorics</a></li>
      <li><a href="http://localhost:1313/tags/mathematics/">Mathematics</a></li>
    </ul>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">Xiaohui Xie&#39;s Site</a></span> · 

    
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
